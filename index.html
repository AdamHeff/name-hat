<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Name Hat</title>
  </head>
  <body>
    <p>Enter names from the same family on a single line, separated by a comma.</p>
    <p>Enter each family on its own line, separated by a carriage return.</p>
    <p>Each name must be unique.</p>

    <textarea id="names" rows="10" cols="125">Adam, Mary&#13;&#10;Scott, Jenna&#13;&#10;Lindsay, Jeremy&#13;&#10;Ross&#13;&#10;Brett</textarea>
    <br>
    <button onclick="calculateWrapper()">Calculate</button>
    <br>
    <p>Results:</p>
    <textarea id="matches" rows="20" cols="125"></textarea>
        
    <script type="text/javascript" src="js/calculate.js"></script>

    <script type="text/javascript">
    /*function calculateWrapper() {
      var names = document.getElementById("names").value.trim();
      var famBlobs = names.split("\n");
      var families = new Array();
      famBlobs.forEach(famBlob => {
        var fam = famBlob.split(",").map(a => a.trim()).filter(b => b != null && b != "");
        families.push(fam);
      });
      document.getElementById("matches").value = calculate(families);
    }*/
    function calculateWrapper() {
      var names = document.getElementById("names").value.trim();
      var famBlobs = names.split("\n");
      var families = new Array();
      famBlobs.forEach(function (famBlob) {
        var fam = famBlob.split(",").map(function (a) {
          return a.trim();
        }).filter(function (b) {
          return b != null && b != "";
        });
        families.push(fam);
      });
      document.getElementById("matches").value = calculate(families);
    }
    </script>
  </body>
</html>
